<div id="post-list" infinite-scroll="getConfessions()" infinite-scroll-disabled="loadingConfessions || !doLoadMoreConfessions" infinite-scroll-distance="1"><div class="alert" ng-show="view === 'favourites' && fbUser.getAccessToken() === '' && !loadingConfessions">Please log in to view your favourites or <a href="/#!home">go back to the main page</a>.</div><div class="alert" ng-show="view !== 'favourites' && (confessions.length === 0) && !loadingConfessions">No confessions to display. <a href="/#!submit">How about submitting your own?</a></div><div ng-hide="view === 'favourites' && fbUser.getAccessToken() === ''" class="post" ng-repeat="confession in confessions"><div class="post-header"><span ng-show="confession.categories.length === 0">No Category</span> <span ng-repeat="category in confession.categories"><a href="/#!category/{{category.confession_category_id}}">{{category.confession_category}}</a>{{$last ? '' : ', '}}</span><div class="share-social-media">SHARE: <a href="https://twitter.com/intent/tweet?url=http%3A%2F%2Fnuswhispers.com%2Fconfession%2F{{confession.confession_id}}/" target="_blank" class="btn btn-social-media"><span class="typcn typcn-social-twitter"></span></a> <a ng-click="shareConfessionFB(confession.confession_id)" target="_blank" class="btn btn-social-media"><span class="typcn typcn-social-facebook"></span></a></div></div><div class="post-content"><a ng-href="/#!tag/{{confession.confession_id}}" ng-bind="'#' + confession.confession_id"></a>:&nbsp; <span class="post-text" ng-bind-html="confession.content | escapeHTML | linkTags | parseUrl"></span><br><img class="post-image" ng-hide="confession.images == null" ng-src="{{confession.images}}"><div class="post-facebook-link"><a ng-href="https://www.facebook.com/permalink.php?story_fbid={{confession.fb_post_id}}&id={{fbUser.getPageID()}}" target="_blank">View on Facebook</a></div></div><div class="post-footer"><span class="typcn typcn-watch"></span><span am-time-ago="confession.status_updated_at_timestamp" am-preprocess="unix" class="post-time"></span><div class="post-media-summary"><a href="/#!home" class="tweets-count liked" target="_blank">8</a> <a ng-click="confession.show_comments = !confession.show_comments" ng-class="{shown: confession.show_comments}" class="post-media-action-btn show-comments-btn" tooltip-placement="bottom" uib-tooltip="{{confession.show_comments ? 'Hide Comments' : 'Show Comments'}}">{{confession.facebook_information.comments.data.length}}</a> <a ng-click="toggleLikeConfession(confession)" ng-class="{liked: confessionIsLiked(confession)}" class="post-media-action-btn fb-likes" target="_blank" tooltip-placement="bottom" uib-tooltip="{{fbUser.getAccessToken() === '' ? 'Login to Like' : (confessionIsLiked(confession) ? 'Unlike' : 'Like')}}">{{confession.facebook_information.likes.summary.total_count}}</a> <a ng-click="toggleFavouriteConfession(confession)" ng-class="{liked: confessionIsFavourited(confession)}" class="post-media-action-btn favs-count" target="_blank" tooltip-placement="bottom" uib-tooltip="{{fbUser.getAccessToken() === '' ? 'Login to Favourite' : (confessionIsFavourited(confession) ? 'Unfavourite' : 'Favourite')}}">{{confession.favourites.length}}</a></div></div><div class="post-comment-list" uib-collapse="!confession.show_comments"><div ng-hide="fbUser.getAccessToken() === ''" class="post-new-comment post-comment"><span class="media-left"><img class="post-user-thumbnail" ng-src="http://graph.facebook.com/{{fbUser.getUserID()}}/picture?width=256&height=256"></span><form class="media-body" ng-submit="commentConfession(confession, confession.new_comment)"><textarea class="msd-elastic form-control" ng-required="true" ng-trim="false" ng-model="confession.new_comment" placeholder="Write a comment..."></textarea><button class="btn comment-btn" type="submit">Comment</button></form></div><ul class="media-list"><li class="media post-comment" ng-repeat="comment in confession.facebook_information.comments.data" ng-class="{'comment-highlight': (highlightNewCommentID === comment.id)}"><a class="media-left" href="https://www.facebook.com/{{comment.from.id}}" target="_blank"><img class="post-user-thumbnail" ng-src="http://graph.facebook.com/{{comment.from.id}}/picture?width=256&height=256"></a><div class="media-body"><a href="https://www.facebook.com/{{comment.from.id}}" target="_blank">{{comment.from.name}}</a> - <span class="post-time" am-time-ago="comment.created_time"></span><p ng-bind-html="comment.message | escapeHTML | parseUrl | linkTags"></p><!-- Nested comment replies --><div ng-repeat="reply in comment.comments.data" class="media post-comment"><a class="media-left" href="https://www.facebook.com/{{reply.from.id}}" target="_blank"><img class="post-user-thumbnail" ng-src="http://graph.facebook.com/{{reply.from.id}}/picture?width=256&height=256"></a><div class="media-body"><a href="https://www.facebook.com/{{reply.from.id}}" target="_blank">{{reply.from.name}}</a> - <span class="post-time" am-time-ago="reply.created_time"></span><p ng-bind-html="reply.message | escapeHTML | parseUrl | linkTags"></p></div></div></div></li></ul><div class="post-comment-fb-link"><a ng-href="https://www.facebook.com/permalink.php?story_fbid={{confession.fb_post_id}}&id={{fbUser.getPageID()}}" target="_blank">View Comments on Facebook</a></div></div></div><div ng-show="loadingConfessions" class="loading"></div></div>